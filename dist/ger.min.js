!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.GER=r()}(this,function(){function e(e,r){return l?e:r}function r(e,r,t){return e.apply(t,r)}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},u=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},c={typeDecide:function(e,r){return Object.prototype.toString.call(e)==="[object "+r+"]"},isFunction:function(e){return c.typeDecide(e,"Function")},isString:function(e){return c.typeDecide(e,"String")},serializeObj:function(e){var r="";return Object.keys(e).forEach(function(t){c.typeDecide(e[t],"Object")?r+=t+"="+c.stringify(e[t]):r+=t+"="+e[t]+"^"}),console.log(r),encodeURIComponent(r.substr(0,r.length-1))},stringify:function(e){if(window.JSON&&window.JSON.stringify)return JSON.stringify(e);var r=void 0===e?"undefined":t(e);if("object"!=r||null===e)return"string"==r&&(e='"'+e+'"'),String(e);var n,o,i=[],a=e&&e.constructor==Array,u=arguments.callee;for(n in e)e.hasOwnProperty(n)&&(o=e[n],r=void 0===o?"undefined":t(o),e.hasOwnProperty(n)&&("string"==r?o='"'+o+'"':"object"==r&&null!==o&&(o=u(o)),i.push((a?"":'"'+n+'":')+String(o))));return(a?"[":"{")+String(i)+(a?"]":"}")},parse:function(e){return window.JSON&&window.JSON.parse?JSON.parse(e):new Function("return "+e)()},getServerPort:function(){return""===window.location.port?"http:"===window.location.protocol?"80":"443":window.location.port},getUserAgent:function(){return window.navigator.userAgent},getPlatType:function(){try{return document.createEvent("TouchEvent"),"Mobile"}catch(e){return"PC"}},flashVer:function(){var e="-",r=navigator,t=void 0;if(r.plugins&&r.plugins.length){for(t=0;t<r.plugins.length;t++)if(-1!==r.plugins[t].name.indexOf("Shockwave Flash")){e=r.plugins[t].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(t=10;t>=2;t--)try{var n=new Function("return new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+t+"');")();if(n){e=t+".0";break}}catch(e){}return e},stringSplice:function(e,r,t,n){if(""===e)return"";n=""===n?"=":n,r+=n;var o=e.indexOf(r);if(o<0)return"";o+=r.length;var i=i<o?e.length:e.indexOf(t,o);return e.substring(o,i)},getReferer:function(){var e=document.referrer.toLowerCase(),r=/^[^\?&#]*.swf([\?#])?/;return""!==e&&!e.match(r)||(e=c.stringSplice(window.location.href,"ref","&","")),encodeURIComponent(e)},getSystemParams:function(){var e=window.screen;return{userAgent:c.getUserAgent(),currentUrl:window.location.href,timestamp:+new Date+Math.random(),projectType:c.getPlatType(),flashVer:c.flashVer(),title:document.title,screenSize:e.width+"x"+e.height,referer:location.hostname?location.hostname:"",host:window.location.protocol+"//"+window.location.hostname}},toArray:function(e){return Array.prototype.slice.call(e)},getCookie:function(e){for(var r=document.cookie.split("; "),t="",n=0;n<r.length;n++){var o=r[n].split("=");if(o[0]==e){t=o[1];break}}return t},addCookie:function(e,r,t){var n=new Date;return n.setDate(n.getDate()+(t||365)),document.cookie=e+"="+r+"; expires="+n.toGMTString(),c.getCookie(e)},noop:function(){},clearCookie:function(e){return c.addCookie(e,"",-1),c.getCookie(e)},assignObject:function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e},getErrorInfo:function(e){if(void 0!==e.stack&&e.stack){var r,t,n,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=e.stack.split("\n"),f=[];/^(.*) is undefined$/.exec(e.message);if(t=o.exec(l[1])){var h=t[2]&&0===t[2].indexOf("native"),p=t[2]&&0===t[2].indexOf("eval");p&&(r=s.exec(t[2]))&&(t[2]=r[1],t[3]=r[2],t[4]=r[3]),n={url:h?null:t[2],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=u.exec(l[1]))n={url:t[2],line:+t[3],column:t[4]?+t[4]:null};else if(t=a.exec(l[1])){var p=t[3]&&t[3].indexOf(" > eval")>-1;p&&(r=c.exec(t[3]))?(t[3]=r[1],t[4]=r[2],t[5]=null):0!==i||t[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1),n={url:t[3],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}return{msg:e.name+":"+e.message,rowNum:n.line,colNum:n.column,targetUrl:n.url,level:4}}return{msg:e.name+":"+e.message,level:4}}},s=function(){function e(r){n(this,e),this.config={proxyAll:!1,mergeReport:!0,delay:1e3,url:"ewewe",except:[/^Script error\.?/,/^Javascript error: Script error\.? on line 0/],random:1,repeat:5,errorLSSign:"mx-error",maxErrorCookieNo:20,validTime:7},this.config=c.assignObject(this.config,r)}return o(e,[{key:"get",value:function(e){return this.config[e]}},{key:"set",value:function(e,r){return this.config[e]=r,this.config[e]}}]),e}(),l=!!window.localStorage,f={getKey:function(e){var r=function(r){return e[r]};return["msg","colNum","rowNum"].filter(r).map(r).join("@")},deleteExpiresItem:function(e){var r=e?c.parse(e):{},t=+new Date;for(var n in r)r[n].expiresTime<=t&&delete r[n];return r},getEpires:function(e){return+new Date+864e5*e},limitError:function(e,r){var t=Object.keys(e);return t.length>=r&&delete e[t[0]],e},setInfo:function(e,r,t,n){var o=f.getItem(e);if(r){var i=f.getKey(r);o=this.limitError(o,n),o[i]={expiresTime:f.getEpires(t),value:r.msg}}return c.stringify(o)},setItem:e(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];localStorage.setItem(t[0],r(f.setInfo,t,f))},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];c.addCookie(t[0],r(f.setInfo,t,f))}),getItem:e(function(e){return f.deleteExpiresItem(localStorage.getItem(e))},function(e){return f.deleteExpiresItem(c.getCookie(e))}),clear:e(function(e){return e?localStorage.removeItem(e):localStorage.clear()},function(e){return e?c.clearCookie(e):document.cookie.split("; ").forEach(c.clearCookie)})};return function(e){function r(e){n(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._storeClcikedDom=function(e){var r=e.target?e.target:e.srcElement,n={time:(new Date).getTime()};if(r&&(r.tagName&&(n.tagName=r.tagName),r.id&&(n.id=r.id),r.className&&(n.className=r.className),r.name&&(n.name=r.name),!r.id)){for(var o=0,i=r;o++<3&&i.parentNode&&(i=i.parentNode,!i.id););if(i.id)n.parentId=o+":"+i.id;else{var a=i.outerHTML.replace(/>\s+</g,"><");a&&a.length>200&&(a=a.slice(0,200)),n.outerHTML=a}}t.breadcrumbs.push(n),t.breadcrumbs.length>10&&t.breadcrumbs.shift()},t.breadcrumbs=[],t.rewriteError(),t.rewritePromiseError(),t.catchClickQueue(),t}return a(r,e),o(r,[{key:"rewriteError",value:function(){var e=this,r=arguments,t=window.onerror||c.noop;window.onerror=function(n,o,i,a,u){if(a=a||window.event&&window.event.errorCharacter||0,!e.trigger("error",c.toArray(r)))return!1;var s=n;s=u&&u.stack?e.handleErrorStack(u):e._fixMsgByCaller(s,r.callee.caller),c.typeDecide(s,"Event")&&(s+=s.type?"--"+s.type+"--"+(s.target?s.target.tagName+"::"+s.target.src:""):""),s&&e.error({msg:s,rowNum:i,colNum:a,targetUrl:o,level:4,breadcrumbs:JSON.stringify(e.breadcrumbs)}),t.call(null,n,o,i,a,u)}}},{key:"rewritePromiseError",value:function(){var e=this,r=arguments,t=window.onunhandledrejection||c.noop;window.onunhandledrejection=function(n){if(!e.trigger("error",c.toArray(r)))return!1;var o=n.reason&&n.reason.message||"",i={};n.reason&&n.reason.stack?(o=e.handleErrorStack(n.reason),i=e._parseErrorStack(n.reason.stack)):o=e._fixMsgByCaller(o,r.callee.caller),o&&e.error({msg:o,rowNum:i.line||0,colNum:i.col||0,targetUrl:i.targetUrl||"",level:4,breadcrumbs:JSON.stringify(e.breadcrumbs)}),t.call(null,n)}}},{key:"_fixMsgByCaller",value:function(e,r){for(var t=[],n=r,o=3;n&&o-- >0&&(t.push(n.toString()),n!==n.caller);)n=n.caller;return t.length>0&&(e+="@"+t.join(",")),e}},{key:"_parseErrorStack",value:function(e){var r={},t=e.split("at"),n=t[1].match(/http.*/)[0].replace(/\)$/,""),o=n.split(":"),i=o.length;return r.col=o[i-1],r.line=o[i-2],o.splice(i-2,2),r.targetUrl=o.join(":"),r}},{key:"handleErrorStack",value:function(e){var r=e.stack,t=e.toString();return t?-1===r.indexOf(t)&&(r+="@"+t):r="",r}},{key:"catchClickQueue",value:function(){window.addEventListener?"ontouchstart"in document.documentElement?window.addEventListener("touchstart",this._storeClcikedDom,!0):window.addEventListener("click",this._storeClcikedDom,!0):document.attachEvent("onclick",this._storeClcikedDom)}}]),r}(function(e){return function(e){function r(e){n(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.handlers={},t}return a(r,e),o(r,[{key:"on",value:function(e,r){return this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(r),this.handlers[e]}},{key:"off",value:function(e){this.handlers[e]&&delete this.handlers[e]}},{key:"trigger",value:function(e,r){var t=this,n=r||[],o=this.handlers[e];return!o||o.every(function(e){return!1!==e.apply(t,n)})}}]),r}(e)}(function(e){return function(e){function r(e){n(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.setItem(),t}return a(r,e),o(r,[{key:"getItem",value:function(e){return f.getItem(e)}},{key:"setItem",value:function(e){var r=this.config;return f.setItem(this.config.errorLSSign,e,r.validTime,r.maxErrorCookieNo),c.stringify(e)}},{key:"clear",value:function(e){f.clear(e)}}]),r}(e)}(function(e){return function(e){function r(e){n(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.errorQueue=[],t.repeatList={},t.url=t.config.url+"?err_msg=",["log","debug","info","warn","error"].forEach(function(e,r){t[e]=function(n){return t.handleMsg(n,e,r)}}),t}return a(r,e),o(r,[{key:"repeat",value:function(e){var r=e.rowNum||"",t=e.colNum||"",n=e.msg+r+t;return this.repeatList[n]=this.repeatList[n]?this.repeatList[n]+1:1,this.repeatList[n]>this.config.repeat}},{key:"request",value:function(e,r){var t=new window.Image;t.onload=r,t.src=e}},{key:"report",value:function(e){var r=this,t=this.config.mergeReport;if(0===this.errorQueue.length)return this.url;var n=t?this.errorQueue:[this.errorQueue.shift()];t&&(this.errorQueue=[]);var o=n.map(function(e){return r.setItem(e),c.serializeObj(e)}).join("|"),i=this.url+o;return this.request(i,function(){e&&e.call(r),r.trigger("afterReport")}),i}},{key:"send",value:function(e){var r=this;if(this.trigger("beforeReport")){var t=e||c.noop,n=this.config.mergeReport?this.config.delay:0;setTimeout(function(){r.report(t)},n)}}},{key:"except",value:function(e){var r=this.config.except,t=!1,n=null;if(c.typeDecide(r,"Array"))for(var o=0,i=r.length;o<i;o++)if(n=r[o],c.typeDecide(n,"RegExp")&&n.test(e.msg)||c.typeDecide(n,"Function")&&n(e,e.msg)){t=!0;break}return t}},{key:"catchError",value:function(e){return!(Math.random()>=this.config.random)&&(!this.repeat(e)&&(!this.except(e)&&(this.errorQueue.push(e),this.errorQueue)))}},{key:"handleMsg",value:function(e,r,t){if(!e)return!1;if(c.typeDecide(e,"Object")&&!e.msg)return!1;c.typeDecide(e,"Error")&&(e={msg:e.message,ext:{stack:e.stack}});var n=c.typeDecide(e,"Object")?e:{msg:e,level:t};return n=c.assignObject(c.getSystemParams(),n),this.catchError(n)&&this.send(),n}}]),r}(e)}(function(e){return function(e){function r(e){n(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.consoleList={},t.timeoutkey=null,t.proxy(),t}return a(r,e),o(r,[{key:"proxy",value:function(){var e=this.config;e.proxyAll?this.proxyJquery().proxyModules().proxyTimer().proxyConsole():(e.proxyJquery&&this.proxyJquery(),e.proxyModules&&this.proxyModules(),e.proxyTimer&&this.proxyTimer(),e.proxyConsole&&this.proxyConsole())}},{key:"proxyConsole",value:function(){var e=this;return["log","debug","info","warn","error"].forEach(function(r,t){var n=window.console[r];window.console[r]=function(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];e.reportConsole(n,r,t,c.toArray(i))}}),this}},{key:"proxyTimer",value:function(){return window.setTimeout=this.catTimeout(setTimeout),window.setInterval=this.catTimeout(setInterval),this}},{key:"proxyJquery",value:function(e){var r=this,t=e||window.$;if(!t||!t.event)return this;var n=void 0,o=void 0;t.zepto?(n=t.fn.on,o=t.fn.off,t.fn.on=this.makeArgsTry(n),t.fn.off=function(){var e=[];return c.toArray(arguments).forEach(function(r){c.isFunction(r)&&r.tryWrap&&(r=r.tryWrap),e.push(r)}),o.apply(this,e)}):t.fn.jquery&&(n=t.event.add,o=t.event.remove,t.event.add=this.makeArgsTry(n),t.event.remove=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=[];return c.toArray(t).forEach(function(e){c.typeDecide(e,"Function")&&e.tryWrap&&(e=e.tryWrap),i.push(e)}),o.apply(r,i)});var i=t.ajax;return i&&(t.ajax=function(e,n){return n||(n=e,e=void 0),r.makeObjTry(n),e?i.call(t,e,n):i.call(t,n)}),this}},{key:"reportConsole",value:function(e,r,t,n){var o=this;this.on("beforeReport",function(){o.config.mergeReport=!0});var i="";n.forEach(function(e){c.typeDecide(e,"string")?i+=e:c.typeDecide(e,"array")?i+="["+e.join(",")+"]":i+=c.stringify(e)});var a=this.consoleList[r];return a=a||[],a.push(c.assignObject(c.getSystemParams(),{msg:i,level:t,rowNum:"",colNum:"",targetUrl:""})),a.length>10&&(this.errorQueue=this.errorQueue.concat(a),this.send(!0,function(){a=[]})),e.apply(this,n)}},{key:"proxyModules",value:function(){var e=window.require,r=window.define;if(r&&r.amd&&e&&(window.require=this.catArgs(e),c.assignObject(window.require,e),window.define=this.catArgs(r),c.assignObject(window.define,r)),window.seajs&&r){var t=this;window.define=function(){for(var e,n=[],o=0,i=arguments.length;o<i;o++)e=arguments[o],c.isFunction(e)&&(e=t.cat(e),e.toString=function(e){return function(){return e.toString()}}(arguments[o])),n.push(e);return r.apply(this,n)},window.seajs.use=this.catArgs(window.seajs.use),c.assignObject(window.define,r)}return this}},{key:"proxyCustomFn",value:function(e){return this.cat(e)}},{key:"proxyCustomObj",value:function(e){return this.makeObjTry(e)}},{key:"cat",value:function(e,r){var t=this;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];try{return r=r||c.toArray(o),e.apply(t,r)}catch(e){var a=c.getErrorInfo(e);if(t.trigger("tryError",[a]),t.error(a),!t.timeoutkey){var u=window.onerror;window.onerror=c.noop,t.timeoutkey=setTimeout(function(){window.onerror=u,t.timeoutkey=null},50)}throw e}}}},{key:"catArgs",value:function(e){var r=this;return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=[];return c.toArray(n).forEach(function(e){c.isFunction(e)&&(e=r.cat(e)),i.push(e)}),e.apply(window,i)}}},{key:"catTimeout",value:function(e){var r=this;return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=c.toArray(n),a=i[0],u=i[1];if(c.isString(a))try{a=new Function(a)}catch(e){throw e}var s=i.splice(2);return a=r.cat(a,s.length&&s),e(a,u)}}},{key:"makeArgsTry",value:function(e,r){var t=this;return function(){var n,o=[];return c.toArray(arguments).forEach(function(e){c.isFunction(e)&&(n=t.cat(e))&&(e.tryWrap=n)&&(e=n),o.push(e)}),e.apply(r||this,o)}}},{key:"makeObjTry",value:function(e){var r=void 0,t=void 0;for(r in e)e.hasOwnProperty(r)&&(t=e[r],c.isFunction(t)&&(e[r]=this.cat(t)));return e}}]),r}(e)}(s)))))});
